import{j as e,r as p,a as x}from"./app-Cf-DtJq5.js";import{D as k}from"./DashboardLayout-BqY-66oT.js";/* empty css            */const N=({id:a,name:b,refNo:o,department:c,status:i,createdAt:m,isNewlyAdded:h=!1,onHold:j,onComplete:f,onStart:g,onViewDetails:l})=>{const u={pending:{label:"Pending",color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})},in_progress:{label:"In Progress",color:"bg-blue-100 text-blue-800 border-blue-200",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"})]})},completed:{label:"Completed",color:"bg-green-100 text-green-800 border-green-200",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})},on_hold:{label:"On Hold",color:"bg-red-100 text-red-800 border-red-200",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}}[i],w=r=>{const s=new Date(r);return Math.abs(new Date().getTime()-s.getTime())/(1e3*60*60)<24?new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).format(s):new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(s)},t=()=>{const r=new Date(m);return Math.abs(new Date().getTime()-r.getTime())/(1e3*60*60)<24};return e.jsxs("div",{className:`bg-white rounded-lg shadow-md overflow-hidden border border-gray-200 hover:shadow-lg transition-shadow duration-200 ${h?"ring-2 ring-blue-200 ring-opacity-50":""}`,children:[e.jsx("div",{className:"flex justify-between items-center p-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${u.color} flex items-center`,children:[u.icon,u.label]}),h&&e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-bold bg-blue-500 text-white animate-pulse",children:"NEW"})]})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:b}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Ref: ",o]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-4",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Department: ",c]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[i==="pending"&&e.jsxs("button",{onClick:()=>g(a),className:"px-3 py-2 bg-blue-500 text-white text-sm rounded-md hover:bg-blue-600 transition-colors duration-200 flex items-center flex-1 min-w-max",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Start Job"]}),i==="in_progress"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>j(a),className:"px-3 py-2 bg-yellow-500 text-white text-sm rounded-md hover:bg-yellow-600 transition-colors duration-200 flex items-center flex-1 min-w-max",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Hold"]}),e.jsxs("button",{onClick:()=>f(a),className:"px-3 py-2 bg-green-500 text-white text-sm rounded-md hover:bg-green-600 transition-colors duration-200 flex items-center flex-1 min-w-max",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Complete"]})]}),i==="on_hold"&&e.jsxs("button",{onClick:()=>g(a),className:"px-3 py-2 bg-blue-500 text-white text-sm rounded-md hover:bg-blue-600 transition-colors duration-200 flex items-center flex-1 min-w-max",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Resume"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("span",{className:t()?"text-blue-600 font-medium":"",children:["Created: ",w(m)]})]}),e.jsxs("span",{className:"text-gray-400",children:["ID: #",a]})]})]})]})},y=({jobs:a})=>{const b=a.sort((t,r)=>new Date(r.created_at).getTime()-new Date(t.created_at).getTime()),[o,c]=p.useState(b),[i,m]=p.useState(new Set);p.useEffect(()=>{const r=new URLSearchParams(window.location.search).get("newJob");if(r&&o.length>0){const s=parseInt(r);m(n=>new Set(n).add(s)),window.history.replaceState({},"",window.location.pathname),setTimeout(()=>{m(n=>{const v=new Set(n);return v.delete(s),v})},1e4)}},[o]);const h=t=>{console.log(`Holding job with ID: ${t}`),x.put(`/jobs/${t}/status`,{status:"on_hold"},{onSuccess:()=>{const r=o.map(s=>s.id===t?{...s,status:"on_hold"}:s).sort((s,n)=>new Date(n.created_at).getTime()-new Date(s.created_at).getTime());c(r),alert(`Job ${t} put on hold!`)},onError:r=>{console.error("Failed to update job status:",r),alert("Failed to update job status. Please try again.")}})},j=t=>{console.log(`Completing job with ID: ${t}`),x.put(`/jobs/${t}/status`,{status:"completed"},{onSuccess:()=>{const r=o.map(s=>s.id===t?{...s,status:"completed"}:s).sort((s,n)=>new Date(n.created_at).getTime()-new Date(s.created_at).getTime());c(r),alert(`Job ${t} marked as completed!`)},onError:r=>{console.error("Failed to update job status:",r),alert("Failed to update job status. Please try again.")}})},f=t=>{console.log(`Starting job with ID: ${t}`),x.put(`/jobs/${t}/status`,{status:"in_progress"},{onSuccess:()=>{const r=o.map(s=>s.id===t?{...s,status:"in_progress"}:s).sort((s,n)=>new Date(n.created_at).getTime()-new Date(s.created_at).getTime());c(r),alert(`Job ${t} started!`)},onError:r=>{console.error("Failed to update job status:",r),alert("Failed to update job status. Please try again.")}})},g=t=>{console.log(`Viewing details for job with ID: ${t}`),x.visit(`/jobs/${t}`)},[l,d]=p.useState("all"),w=(l==="all"?o:o.filter(t=>t.status===l)).sort((t,r)=>new Date(r.created_at).getTime()-new Date(t.created_at).getTime());return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Job Management"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Jobs are sorted by creation date (newest first) â€¢",e.jsxs("span",{className:"inline-flex items-center ml-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-1 animate-pulse"}),"Recent jobs are highlighted"]})]})]}),e.jsxs("button",{onClick:()=>x.visit("/jobs/create"),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-colors flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Job"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-3",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:"Filter Jobs"})}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("button",{onClick:()=>d("all"),className:`px-3 py-1 rounded-md text-sm ${l==="all"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"All Jobs"}),e.jsxs("button",{onClick:()=>d("pending"),className:`px-3 py-1 rounded-md text-sm flex items-center ${l==="pending"?"bg-yellow-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[e.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full mr-1"}),"Pending"]}),e.jsxs("button",{onClick:()=>d("in_progress"),className:`px-3 py-1 rounded-md text-sm flex items-center ${l==="in_progress"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-1"}),"In Progress"]}),e.jsxs("button",{onClick:()=>d("completed"),className:`px-3 py-1 rounded-md text-sm flex items-center ${l==="completed"?"bg-green-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-1"}),"Completed"]}),e.jsxs("button",{onClick:()=>d("on_hold"),className:`px-3 py-1 rounded-md text-sm flex items-center ${l==="on_hold"?"bg-red-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full mr-1"}),"On Hold"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md border-l-4 border-yellow-500",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold",children:o.filter(t=>t.status==="pending").length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md border-l-4 border-blue-500",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold",children:o.filter(t=>t.status==="in_progress").length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md border-l-4 border-green-500",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold",children:o.filter(t=>t.status==="completed").length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md border-l-4 border-red-500",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"On Hold"}),e.jsx("p",{className:"text-2xl font-bold",children:o.filter(t=>t.status==="on_hold").length})]})]}),w.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(t=>e.jsx(N,{id:t.id,name:t.name||t.ref_no,refNo:t.ref_no,department:t.department,status:t.status,createdAt:t.created_at,isNewlyAdded:i.has(t.id),onHold:h,onComplete:j,onStart:f,onViewDetails:g},t.id))}):e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md text-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No jobs found"}),e.jsx("p",{className:"text-gray-500",children:"There are no jobs matching your current filter criteria."})]})]})};y.layout=a=>e.jsx(k,{children:a});export{y as default};
